<html>
<head>
<title>Temp</title>

<script language="JavaScript">
modifierstyle = 'normal';
function nada()
{
alert('hey');
var str='fghfg!';
alert(str.charAt(677));
}
function test()
{
var strin = out.value.split('\r\n');
var nmode = 0;
var strout = [];
var bctrl, balt, bshift,strstyle, realkey;
var defkeys = {};
for (var l=0;l<strin.length;l++)
{
	if (strin[l].charAt(0) != '^') { 
		if (strin[l].indexOf('GOODNESS') == -1){ alert('Bad line?'); return;}
		nmode++;
		strout.push('gk[' + nmode + '] = {};');
		var defkeys = {};
		continue;
	}
	debug.value = strin[l];
	var tline = strin[l].substr(1,strin[l].length).split('*');
	
	bctrl=false; balt = false; bshift=false; realkey = '';strstyle = '';
	tparse = tline[0].split('|');
	for (var i=0; i<tparse.length;i++)
	{
		if (tparse[i] == '') continue;
		if (tparse[i]=='Ctrl') bctrl = true;
		else if (tparse[i]=='Alt')  balt = true;
		else if (tparse[i]=='Shift')  bshift = true;
		else 
		{
			realkey = tparse[i];
		}
	}
	if (!defkeys[realkey]) { strout.push('gk[' + nmode + ']["' + realkey + '"] = {};'); defkeys[realkey]=true;}
	if (bctrl) strstyle += 'control';
	if (bshift) strstyle += 'shift';
	if (balt) strstyle += 'alt';
	if (strstyle == '') strstyle = 'normal';
	strout.push('gk[' + nmode + ']["' + realkey + '"].' + strstyle + ' = { ');
	strout.push(' brev:"' + tline[2] + '", name:"' + tline[1] + '.' + tline[2] + '" };');
}


out.value = strout.join('\r\n');
}

</script>
<link rel="stylesheet" type="text/css" href="keyboard.css" />
</head>
<body>

<button onclick="test();">Wow</button>
<button onclick="nada();">W</button>
<br></br><textarea id="debug"></textarea>
<div id="divout"></div>
<textarea id="out" rows="20"></textarea>


</body>
</html>